title: "Exasol Personal Edition vs ClickHouse Performance Comparison on TPC-H SF1"
author: "Oleksandr Kozachuk, Principal Architect at Exasol AG"

# Execution configuration (optional)
execution:
  parallel: true          # Enable parallel execution of systems (default: false)
  max_workers: 2          # Max concurrent systems (default: number of systems)

# Named environments - allows different infrastructure modes per system
environments:
  # Exasol Personal Edition manages its own AWS infrastructure
  exasol_pe:
    mode: "managed"  # Self-managed deployment (no terraform from benchkit)

  # ClickHouse uses benchkit's terraform infrastructure
  clickhouse_cloud:
    mode: "aws"
    region: "eu-west-1"
    allow_external_database_access: true
    instance_type: "r5d.4xlarge"  # 16 vCPUs, 128GB RAM, 2x300GB NVMe local storage
    disk:
      type: "local"
    label: "ok-bench-ch"
    os_image: "ubuntu-22.04"
    ssh_key_name: "ok-work3"
    ssh_private_key_path: "~/.ssh/ok-work3.pem"

systems:
  # Exasol Personal Edition - uses its own CLI for deployment
  - name: "exasol"
    kind: "exasol"
    environment: "exasol_pe"  # Use the managed environment
    version: "8.35.0"         # Personal Edition version
    setup:
      method: "managed"       # Uses Exasol Personal Edition CLI
      exasol_pe_version: "0.5.1"
      # Pass-through options for 'exasol init aws':
      cluster_size: 1
      instance_type: "r5d.4xlarge"  # Match ClickHouse instance for fair comparison
      data_volume_size: 100         # GB
      schema: "BENCHMARK"
      extra:
        optimizer_mode: "analytical"

  # ClickHouse with terraform-managed infrastructure
  - name: "clickhouse"
    kind: "clickhouse"
    environment: "clickhouse_cloud"  # Use the AWS environment
    version: "25.10.2.65"            # Latest stable ClickHouse version
    setup:
      method: "native"               # Native APT installation
      use_additional_disk: true      # Auto-detect and use additional NVMe disk
      data_dir: "/data/clickhouse"
      host: "$CLICKHOUSE_PUBLIC_IP"  # Use public IP for external access
      port: 8123                     # HTTP port for clickhouse-connect
      username: "default"
      password: "clickhouse123"      # Password for benchmark user
      extra:
        memory_limit: "32g"          # Memory limit for ClickHouse
        max_threads: "16"            # Match instance vCPUs
        max_memory_usage: "30000000000"  # ~28GB in bytes

workload:
  name: "tpch"
  scale_factor: 1               # 1GB dataset for test
  runs_per_query: 7             # Number of measured runs
  warmup_runs: 1                # Warmup runs before measurement
  data_format: "csv"            # csv or parquet
  generator: "dbgen"

report:
  show_boxplots: true
  show_latency_cdf: true
  show_bar_chart: true
  show_heatmap: true
