title: "Trino Multinode Performance Test on TPC-H SF1"
author: "Benchmark Team"

# Execution configuration
execution:
  parallel: false

env:
  mode: "aws"
  region: "eu-west-1"
  allow_external_database_access: true
  instances:
    trino:
      instance_type: "r5d.4xlarge"  # 16 vCPUs, 128GB RAM, 2x300GB NVMe local storage
      disk:
        type: "local"
      label: "ok-bench-trino-mn"
  os_image: "ubuntu-22.04"
  ssh_key_name: "ok-work3"
  ssh_private_key_path: "~/.ssh/ok-work3.pem"

systems:
  - name: "trino"
    kind: "trino"
    version: "447"                 # Compatible with Java 22
    setup:
      method: "native"             # Native installation
      node_count: 3                # 3-node cluster: 1 coordinator + 2 workers
      use_additional_disk: true    # Auto-detect and use additional NVMe disk
      host: "$TRINO_PUBLIC_IP"     # Coordinator public IP
      port: 8080                   # Trino HTTP port
      username: "admin"
      catalog: "hive"               # Use views that wrap tpch connector
      schema: "tpch_views"          # Views with TPC-H standard column names
      storage:                      # S3 storage for multinode (required)
        type: "s3"
        bucket: "benchkit-trino-test-eu-west-1"
        region: "eu-west-1"
      extra:
        # Memory settings for multinode cluster
        query_max_memory: "100GB"           # Total across cluster
        query_max_memory_per_node: "40GB"   # Per node limit

workload:
  name: "tpch"
  scale_factor: 1                # 1GB dataset for testing
  runs_per_query: 3              # Quick test runs
  warmup_runs: 1
  data_format: "csv"
  generator: "dbgen"

report:
  show_boxplots: true
  show_latency_cdf: true
  show_bar_chart: true
