title: "Exasol vs None Performance Comparison for ClickBench"
author: "Stefan Reich, Principal Database Consultant at Exasol AG"
note: "WORK IN PROGRESS -- not stable yet"

# Execution configuration (optional)
execution:
  parallel: true          # Enable parallel execution of systems (default: false)
  max_workers: 2          # Max concurrent systems (default: number of systems)

env:
  mode: "aws"                    # aws, gcp, azure, or local
  region: "eu-west-1"
  allow_external_database_access: true  # Allow external access to database ports
  # Instance configuration per system
  instances:
    exasol_s:
      instance_type: "c6a.8xlarge"  # 32 vCPUs, 64GB RAM, $1.224 per hour (+ EBS)
      disk:
        type: "ebs"              # Use local NVMe for best performance
        size_gb: 150
      label: "ok-bench-exa"
    clickhouse_s:
      instance_type: "c6a.8xlarge"  # 32 vCPUs, 64GB RAM, $1.224 per hour (+ EBS)
      disk:
        type: "ebs"
        size_gb: 150
      label: "ok-bench-exa"
  os_image: "ubuntu-22.04"
  ssh_key_name: "sr-testkey"            # AWS key pair name (without .pem extension)
  ssh_private_key_path: "~/.ssh/sr-testkey.pem"  # Local private key file path

systems:
  # Baseline: Exasol with original queries (first system is baseline)
  - name: "exasol_s"
    kind: "exasol"
    version: "8.29.13"          # Latest Exasol version
    setup:
      method: "installer"        # Native c4 installation
      use_additional_disk: true  # Auto-detect and use additional NVMe disk
      c4_version: "4.28.5"       # Latest c4 version
      host_addrs: "$EXASOL_S_PRIVATE_IP"  # Will be resolved from infrastructure
      host_external_addrs: "$EXASOL_S_PUBLIC_IP"
      working_copy: "@exasol-8.29.13"
      image_password: "exasol123"
      db_password: "exasol456"
      license_file: "configs/exasol.license"  # License file path
      ## current code NEEDS this schema name here
      schema: "clickbench"
      extra:
        dbram: "50g"            # Database RAM allocation
        optimizer_mode: "analytical"
        # Exasol database parameters for analytical workload optimization
        db_params:
          # - "-writeTouchInit=1"
          # - "-cacheMonitorLimit=0"
          # - "-maxOverallSlbUsageRatio=0.95"
          - "-useQueryCache=0"
          # - "-query_log_timeout=0"
          # - "-joinOrderMethod=0"
          # - "-etlCheckCertsDefault=0"
  - name: "clickhouse_s"
    kind: "clickhouse"
    version: "25.10.2.65"         # Latest stable ClickHouse version
    setup:
      method: "native"           # Native APT installation
      use_additional_disk: true  # Auto-detect and use additional NVMe disk
      data_dir: "/data/clickhouse"
      host: "$CLICKHOUSE_S_PUBLIC_IP"  # Use public IP for external access
      port: 8123                 # HTTP port for clickhouse-connect
      username: "default"
      password: "clickhouse123"  # Password for benchmark user
      database: "clickbench"
      extra:
        memory_limit: "50g"      # Memory limit for ClickHouse
        max_threads: "32"        # Match instance vCPUs
        max_memory_usage: "50000000000"  # ~128GB in bytes

workload:
  name: "clickbench"
  runs_per_query: 7             # Number of measured runs
  warmup_runs: 1                # Warmup runs before measurement
  scale_factor: 1               # ClickBench does not have a scale factor, but the template check expects one
  generator: "url-import"       # fallback to "url-download" if url-import is not supported by system
  format: "csv"

report:
  show_boxplots: true
  show_latency_cdf: true
  show_bar_chart: true
  show_heatmap: true
